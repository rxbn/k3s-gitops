---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: renovate
  namespace: renovate
spec:
  interval: 5m
  chart:
    spec:
      # renovate: registryUrl=https://docs.renovatebot.com/helm-charts
      chart: renovate
      version: 25.63.1
      sourceRef:
        kind: HelmRepository
        name: renovate
        namespace: flux-system
      interval: 5m
  values:
    cronjob:
      schedule: "*/15 * * * *"
      labels:
        job: renovate
      concurrencyPolicy: Forbid
      successfulJobsHistoryLimit: 1
      failedJobsHistoryLimit: 3
    ssh_config:
      enabled: true
    redis:
      enabled: true
  valuesFrom:
    - kind: Secret
      name: renovate-helm-values
